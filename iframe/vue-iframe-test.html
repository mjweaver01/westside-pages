<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Iframe Mode Test</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        margin: 0;
        padding: 20px;
        background: #f5f5f5;
      }

      .container {
        max-width: 1200px;
        margin: 0 auto;
        background: white;
        padding: 20px;
        border-radius: 8px;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
      }

      .test-grid {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 20px;
        margin: 20px 0;
      }

      .test-item {
        border: 1px solid #ddd;
        border-radius: 8px;
        overflow: hidden;
      }

      .test-header {
        background: #333;
        color: white;
        padding: 15px;
        text-align: center;
        font-weight: bold;
      }

      .normal {
        background: #4caf50;
      }
      .iframe-mode {
        background: #2196f3;
      }

      iframe {
        width: 100%;
        border: none;
        min-height: 400px;
      }

      .url-display {
        background: #f8f8f8;
        padding: 10px;
        font-family: monospace;
        font-size: 12px;
        border-bottom: 1px solid #eee;
      }

      .benefits {
        background: #e8f5e8;
        border: 1px solid #4caf50;
        border-radius: 8px;
        padding: 20px;
        margin: 20px 0;
      }

      .benefits h3 {
        color: #2e7d32;
        margin-top: 0;
      }

      .features {
        background: #e3f2fd;
        border: 1px solid #2196f3;
        border-radius: 8px;
        padding: 20px;
        margin: 20px 0;
      }

      .features h3 {
        color: #1976d2;
        margin-top: 0;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <h1>üéØ Iframe Mode</h1>
      <p>Testing the new Vue component implementation for iframe mode detection and rendering.</p>

      <div class="features">
        <h3>‚ú® Component Benefits</h3>
        <ul>
          <li>
            <strong>Reactive Detection:</strong> Vue reactivity system handles iframe mode changes
          </li>
          <li>
            <strong>Conditional Rendering:</strong> Uses <code>v-if</code> for clean header/footer
            toggling
          </li>
          <li><strong>Better Performance:</strong> No DOM manipulation, just reactive templates</li>
          <li><strong>Type Safety:</strong> Full TypeScript support with proper types</li>
          <li><strong>Dynamic Loading:</strong> Iframe resizer loads only when needed</li>
          <li><strong>Cleaner Code:</strong> All logic contained in a single Vue component</li>
        </ul>
      </div>

      <div class="test-grid">
        <div class="test-item">
          <div class="test-header normal">Normal Mode</div>
          <div class="url-display">http://localhost:4321/</div>
          <iframe src="http://localhost:4321/" title="Normal Mode - Vue Implementation"> </iframe>
        </div>

        <div class="test-item">
          <div class="test-header iframe-mode">Iframe Mode</div>
          <div class="url-display">http://localhost:4321/?iframe=true</div>
          <iframe
            src="http://localhost:4321/?iframe=true"
            scrolling="no"
            data-iframe-resizer='{"checkOrigin": false, "heightCalculationMethod": "max"}'
            title="Iframe Mode"
          >
          </iframe>
        </div>
      </div>

      <div class="benefits">
        <h3>üöÄ Implementation Improvements</h3>
        <ul>
          <li><strong>No Manual DOM Manipulation:</strong> Vue handles show/hide automatically</li>
          <li>
            <strong>Reactive State:</strong> <code>isIframeMode</code> reactive variable controls
            everything
          </li>
          <li>
            <strong>Component Composition:</strong> Header and Footer are cleanly included as
            components
          </li>
          <li>
            <strong>Dynamic Script Loading:</strong> iframe-resizer loads only when in iframe mode
          </li>
          <li><strong>Better Error Handling:</strong> Try/catch around dynamic imports</li>
          <li>
            <strong>Scoped Styling:</strong> Component-scoped CSS with global iframe overrides
          </li>
        </ul>
      </div>

      <h2>üß™ Test All Pages</h2>

      <div style="margin: 20px 0">
        <h4>Home Page</h4>
        <iframe
          src="http://localhost:4321/?iframe=true"
          scrolling="no"
          style="width: 100%; border: 1px solid #ddd; border-radius: 4px"
          data-iframe-resizer='{"checkOrigin": false}'
          title="Home - Iframe Mode"
        >
        </iframe>
      </div>

      <div style="margin: 20px 0">
        <h4>About Page</h4>
        <iframe
          src="http://localhost:4321/about?iframe=true"
          scrolling="no"
          style="width: 100%; border: 1px solid #ddd; border-radius: 4px"
          data-iframe-resizer='{"checkOrigin": false}'
          title="About - Iframe Mode"
        >
        </iframe>
      </div>

      <div style="margin: 20px 0">
        <h4>Staff Page</h4>
        <iframe
          src="http://localhost:4321/staff?iframe=true"
          scrolling="no"
          style="width: 100%; border: 1px solid #ddd; border-radius: 4px"
          data-iframe-resizer='{"checkOrigin": false}'
          title="Staff - Iframe Mode"
        >
        </iframe>
      </div>
    </div>

    <!-- Load iframe-resizer parent -->
    <script src="https://cdn.jsdelivr.net/npm/iframe-resizer@5.5.2/js/iframeResizer.min.js"></script>

    <script>
      document.addEventListener('DOMContentLoaded', function () {
        // Initialize iframe resizer
        iFrameResize(
          {
            checkOrigin: false,
            heightCalculationMethod: 'max',
            onInit: function (iframe) {
              console.log('‚úÖ iframe initialized:', iframe.title)
            },
            onResized: function (data) {
              console.log('üìè iframe resized:', data.iframe.title, 'Height:', data.height + 'px')
            },
          },
          'iframe[data-iframe-resizer]'
        )
      })
    </script>
  </body>
</html>
